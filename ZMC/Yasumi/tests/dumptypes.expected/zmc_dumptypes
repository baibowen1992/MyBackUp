# DO NOT EDIT THIS FILE! See /etc/zmanda/zmc_aee/zmc_user_dumptypes
#########################
# ZMC Application Tools #
#########################
define application_tool app_amgtar {
	comment	"ZMC GNUTAR Application Plugin: http://wiki.zmanda.com/man/amgtar.8.html"
	plugin	"amgtar"
	#property "GNUTAR-PATH" "/path/to/gtar"
	#property "GNUTAR-LISTDIR" "/path/to/gnutar_list_dir" # Directory where gnutar stores the database it uses to generate incremental dumps.
	# Updating atimes for accessed files adversely affects performance.
	property	"ATIME-PRESERVE"	"no"
	# Checks that the device number does not change for each file.  LVM or FiberChannel might need "no".
	property	"CHECK-DEVICE"	"yes"
	# Do not allow gnutar to cross filesystem boundaries.
	property	"ONE-FILE-SYSTEM"	"yes"
	# Store sparse files efficiently.
	property	"SPARSE"	"yes"
	app_amgtar_user
}

define dumptype zmc_gtar_app {
	program	"APPLICATION"
	application	"app_amgtar"
	zmc_gtar_userapp
}

define application_tool app_amoracle {
	comment	"ZMC amoracle Application Plugin"
	plugin	"amoracle"
	app_amoracle_user
}

define dumptype zmc_oracle_app {
	program	"APPLICATION"
	application	"app_amoracle"
	zmc_oracle_userapp
}

define application_tool app_amrman {
	comment	"ZMC amrman Application Plugin"
	plugin	"amrman"
	app_amrman_user
}

define dumptype zmc_rman_app {
	program	"APPLICATION"
	application	"app_amrman"
	zmc_rman_userapp
}

define application_tool app_ampgsql {
	comment	"PostgreSQL Amanda plugin"
	plugin	"ampgsql"
	app_ampgsql_user
}

define dumptype zmc_postgresql_app {
	program	"APPLICATION"
	application	"app_ampgsql"
	zmc_postgresql_userapp
}

define application_tool app_amstar {
	comment	"ZMC STAR Application Plugin: http://wiki.zmanda.com/man/amstar.8.html"
	plugin	"amstar"
	# Do not allow gnutar to cross filesystem boundaries.
	property	"ONE-FILE-SYSTEM"	"yes"
	# Store sparse files efficiently.
	property	"SPARSE"	"yes"
	property	"STAR-DLE-TARDUMP"	"no"
	#property "STAR-PATH" "/path/to/star"
	#property "STAR-TARDUMP" "/path/to/dir" #directory where star stores the database it uses to generate incremental dumps
	app_amstar_user
}

define dumptype zmc_star_app {
	program	"APPLICATION"
	application	"app_amstar"
	zmc_star_userapp
}

define application_tool app_amsamba {
	comment	"CIFS/SMB compatiable Amanda plugin: http://wiki.zmanda.com/man/amsamba.8.html"
	plugin	"amsamba"
	#property "SMBCLIENT-PATH" "The path to the smbclient binary. The default is set when Amanda is built."
	#property "GNUTAR-PATH" "The path to the gnutar binary. The default is set when Amanda is built. gnutar is use to create the index."
	# "Location of the password file.  Must match the value of 'amanda_pass' in ZMC_Config_Yasumi.
	property	"AMANDAPASS"	"cifs_network_shares"
	app_amsamba_user
}

define dumptype zmc_cifs_app {
	comment	"CIFS/SMB compatiable application: http://wiki.zmanda.com/man/amsamba.8.html"
	program	"APPLICATION"
	application	"app_amsamba"
	# currently only "server" is permitted when using app_amcifs
	estimate	server
	zmc_cifs_userapp
}

define application_tool app_amsuntar {
	comment	"Solaris tar Amanda plugin, supporting ZFS extended attributes: http://wiki.zmanda.com/man/amsuntar.8.html"
	plugin	"amsuntar"
	property	"BLOCK-SIZE"	"64"
	property	"EXTENDED-ATTRIBUTES"	"NO"
	property	"EXTENDED-HEADERS"	"NO"
	app_amsuntar_user
}

define dumptype zmc_suntar_app {
	program	"APPLICATION"
	application	"app_amsuntar"
	strategy	noinc
	# currently only "server" OR "client" is permitted when using app_amsuntar
	estimate	client
	zmc_suntar_userapp
}

define application_tool app_zfssendrecv {
	comment	"ZFS send/recv application support http://wiki.zmanda.com/man/amzfs-sendrecv.8.html"
	plugin	"amzfs-sendrecv"
	property	"DF-PATH"	"/usr/sbin/df"
	property	"ZFS-PATH"	"/usr/sbin/zfs"
	property	"PFEXEC-PATH"	"/usr/bin/pfexec"
	property	"PFEXEC"	"YES"
	property	"KEEP-SNAPSHOT"	"YES"
	app_zfssendrecv_user
}

define dumptype zmc_zfssendrecv_app {
	program	"APPLICATION"
	application	"app_zfssendrecv"
	estimate	server
	zmc_zfssendrecv_userapp
}

define script_tool script_amzfssnapshot {
	comment	"ZFS snapshot application support http://wiki.zmanda.com/man/amzfs-snapshot.8.html"
	plugin	"amzfs-snapshot"
	execute_where	client
	execute_on	pre-dle-amcheck, post-dle-amcheck, pre-dle-estimate, post-dle-estimate, pre-dle-backup, post-dle-backup
	property	"DF-PATH"	"/usr/sbin/df"
	property	"ZFS-PATH"	"/usr/sbin/zfs"
	property	"PFEXEC-PATH"	"/usr/bin/pfexec"
	property	"PFEXEC"	"YES"
	script_amzfssnapshot_user
}

define dumptype zmc_zfssnapshot_app {
	program	"APPLICATION"
	application	"app_amgtar"
	script	"script_amzfssnapshot"
	estimate	server
	zmc_zfssnapshot_userapp
}

define dumptype zmc_windowsdump_app {
	# Zmanda Windows Client (ZWC) uses "DUMP" for all ZMC object types on the Windows platform
	program	"DUMP"
	zmc_windowsdump_userapp
}

#################
# ZMC Dumptypes #
#################
define dumptype zmc_cifs_base {
	zmc_nixglobal_base
	zmc_filesystem_base
	comment	"Base dumptype for Linux/Oracle"
	estimate	server
	compress	none
	encrypt	none
	zmc_cifs_user
}

define dumptype zmc_linuxoracle_base {
	zmc_nixglobal_base
	zmc_db_base
	comment	"Base dumptype for Linux/Oracle"
	estimate	server
	compress	none
	encrypt	none
	zmc_linuxoracle_user
}

define dumptype zmc_postgresql_base {
	zmc_nixglobal_base
	zmc_db_base
	comment	"Base dumptype for PostgreSQL"
	compress	none
	estimate	server
	zmc_postgresql_user
}

define dumptype zmc_solaris_base {
	zmc_nixglobal_base
	zmc_filesystem_base
	comment	"Base dumptype for Solaris"
	compress	none
	zmc_solaris_user
}

define dumptype zmc_unix_base {
	zmc_nixglobal_base
	zmc_filesystem_base
	comment	"Base dumptype for Linux/UNIX"
	program	"APPLICATION"
	application	"app_amgtar"
	compress	none
	zmc_unix_user
}

define dumptype zmc_windows_base {
	zmc_winglobal_base
	zmc_filesystem_base
	comment	"Base dumptype for Windows Filesystem"
	compress	none
	zmc_windows_user
}

define dumptype zmc_windowsexchange_base {
	zmc_winglobal_base
	zmc_application_base
	comment	"Base dumptype for Windows Exchange"
	compress	none
	zmc_windowsexchange_user
}

define dumptype zmc_windowsoracle_base {
	zmc_winglobal_base
	zmc_db_base
	comment	"Base dumptype for Windows Oracle"
	compress	none
	zmc_windowsoracle_user
}

define dumptype zmc_windowssharepoint_base {
	zmc_winglobal_base
	zmc_application_base
	comment	"Base dumptype for Windows Sharepoint"
	compress	none
	zmc_windowssharepoint_user
}

define dumptype zmc_windowssqlserver_base {
	zmc_winglobal_base
	zmc_db_base
	comment	"Base dumptype for Windows SQL Server"
	compress	none
	zmc_windowssqlserver_user
}

define dumptype zmc_windowsss_base {
	zmc_winglobal_base
	zmc_filesystem_base
	comment	"Base dumptype for Windows System State"
	compress	none
	strategy	noinc
	zmc_windowsss_user
}

define dumptype zmc_windowstemplate_base {
	zmc_winglobal_base
	zmc_filesystem_base
	comment	"Base dumptype for Windows Templates"
	compress	none
	zmc_windowstemplate_user
}

